clusterName: "elasticsearch"
nodeGroup: "master"
roles:
  master: "true"
  ingest: "true"
  data: "true"

replicas: 3

# esConfig:
#   elasticsearch.yml: |
#     xpack.security.enabled: true
#     xpack.security.transport.ssl.enabled: true
#     xpack.security.transport.ssl.verification_mode: certificate
#     xpack.security.transport.ssl.keystore.path: /usr/share/elasticsearch/config/certs/elastic-certificates.p12
#     xpack.security.transport.ssl.truststore.path: /usr/share/elasticsearch/config/certs/elastic-certificates.p12    
# 
# extraEnvs:
#   - name: ELASTIC_PASSWORD
#     valueFrom:
#       secretKeyRef:
#         name: elastic-credentials
#         key: password
# 
# secretMounts:
#   - name: elastic-certificates
#     secretName: elastic-certificates
#     path: /usr/share/elasticsearch/config/certs

image: hub.8ops.top/third/elasticsearch
imageTag: 7.17.3

resources:
  requests:
    cpu: "1000m"
    memory: "2Gi"
  limits:
    cpu: "1000m"
    memory: "2Gi"

volumeClaimTemplate:
  accessModes: ["ReadWriteOnce"]
  resources:
    requests:
      storage: 30Gi
persistence:
  enabled: true
  storageClass: "elasticsearch"

antiAffinity: "soft"

ingress:
  enabled: true
  className: "external"
  pathtype: ImplementationSpecific
  hosts:
    - host: elastic.8ops.top
      paths:
        - path: /
  tls:
    - secretName: tls-8ops.top
      hosts:
        - elastic.8ops.top



